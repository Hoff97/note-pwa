(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{169:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(54),i=n.n(r),c=(n(64),n(17)),s=n(58),l=n(11),u=n(12),h=n(14),m=n(13),d=n(34),f=n.n(d);n(84);function v(e){localStorage.setItem("notes",JSON.stringify(e))}function p(){var e=localStorage.getItem("notes");null===e&&(e="[]");for(var t=JSON.parse(e),n=0;n<t.length;n++)void 0===t[n].color&&(t[n].color="white");return t}function g(e){return 0===e.length?0:e[e.length-1].id+1}function k(e){return"empty"===e?"":"- [ ] "}function E(e){var t=p(),n={id:g(t),name:"New note",markdown:e,color:"white"};return t.push(n),v(t),n.id}function b(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e.id){t[n]=e;break}v(t)}function w(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e)return t[n]}var y=["white","red","green","blue","orange"],N=n(7),C=n(8),j=(n(89),n(55)),O=n.n(j),S=n(32);n(169);function T(e){var t=e.checked,n=e.onChange,o=e.children;return a.createElement("label",{className:"checkbox-container"},o,a.createElement("input",{type:"checkbox",checked:t,onChange:function(e){return n(e)}}),a.createElement("span",{className:"checkbox-checkmark"}))}function x(e){return e?"- [x]":"- [ ]"}var I=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).renderListItem=function(e){if(null!==e.checked&&void 0!==e.checked){var t=e.sourcePosition.start.line-1;return a.createElement("li",null,a.createElement(T,{checked:e.checked,onChange:function(n){return o.toggleCheckbox(n,t,e.checked)},children:e.children}))}return Object(S.listItem)(e)},o.state={value:e.value},o}return Object(u.a)(n,[{key:"setValue",value:function(e){this.setState({value:e}),this.props.onChange(e)}},{key:"toggleCheckbox",value:function(e,t,n){var a=this.state.value.split("\n");a[t]=a[t].replace(x(n),x(!n)),this.setValue(a.join("\n"))}},{key:"render",value:function(){return a.createElement(O.a,{source:this.state.value,renderers:{listItem:this.renderListItem},rawSourcePos:!0})}}]),n}(a.Component);var P=/^([\s>]*)(([-*]|(([0-9]+)\.))\s(\[[ x]\])?)?/;var V=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).input=void 0,o.commands=[].concat(Object(s.a)(d.commands.getDefaultCommands()),[{commands:[{name:"Test",icon:function(e){return a.createElement(N.a,{icon:C.c})},children:y.map((function(e){return{name:"C1",icon:function(t){return a.createElement("span",{style:{color:e}},a.createElement(N.a,{icon:C.b}))},execute:function(t,n){o.setColor(e)}}}))}]}]),o.state={note:{markdown:"",id:-1,name:"Placeholder",color:"white"},tab:"write",editTitle:!1},o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=w(this.props.match.params.noteId);e&&this.setState({note:e})}},{key:"componentDidUpdate",value:function(){var e=document.getElementsByClassName("mde-text");e.length>0&&!this.input&&(this.input=e[0],this.input.addEventListener("keydown",this.handleKeyPress.bind(this)))}},{key:"handleKeyPress",value:function(e){var t=this;"Enter"===e.key?setTimeout((function(){t.handleEnter(e)}),10):"Tab"===e.key&&(e.preventDefault(),setTimeout((function(){t.handleTab(e)}),10))}},{key:"handleTab",value:function(e){var t=e.target.selectionStart,n=this.state.note.markdown,a=function(e,t){for(var n=e.split("\n"),a=0;t>n[a].length;)t-=n[a].length,t-=1,a+=1;if(a<n.length)return n[a]}(n,t);if(a){var o=a.match(P);if(o){var r=function(e,t){for(var n=e.split("\n"),a=0,o=0;t>n[a].length;)t-=n[a].length,t-=1,o+=n[a].length+1,a+=1;return o}(n,t);if(e.shiftKey){if(o[1].length>=4){var i=[n.slice(0,r),n.slice(r+4)].join("");this.setValue(i),setTimeout((function(){e.target.selectionStart=t-4,e.target.selectionEnd=t-4}),0)}}else{var c=[n.slice(0,r),"    ",n.slice(r)].join("");this.setValue(c),setTimeout((function(){e.target.selectionStart=t+4,e.target.selectionEnd=t+4}),0)}}}}},{key:"handleEnter",value:function(e){var t=e.target.selectionStart,n=this.state.note.markdown,a=function(e,t){for(var n=e.split("\n"),a=0;t>n[a].length;)t-=n[a].length,t-=1,a+=1;if(a>0)return n[a-1]}(n,t);if(a){var o=a.match(P);if(o){var r=o[1];void 0!==o[5]?r+="".concat(parseInt(o[5])+1,". "):void 0!==o[3]&&(r+="".concat(o[3]," ")),o[6]&&(r+="".concat(o[6]," "));var i=[n.slice(0,t),r,n.slice(t)].join("");this.setValue(i),setTimeout((function(){e.target.selectionStart=t+r.length,e.target.selectionEnd=t+r.length}),0)}}}},{key:"setValue",value:function(e){this.setState({note:Object(c.a)({},this.state.note,{markdown:e})}),b(Object(c.a)({},this.state.note,{markdown:e}))}},{key:"setTab",value:function(e){this.setState({tab:e})}},{key:"setColor",value:function(e){this.setState({note:Object(c.a)({},this.state.note,{color:e})}),b(Object(c.a)({},this.state.note,{color:e}))}},{key:"toggleEdit",value:function(){this.setState({editTitle:!this.state.editTitle})}},{key:"setName",value:function(e){this.setState({note:Object(c.a)({},this.state.note,{name:e})}),b(Object(c.a)({},this.state.note,{name:e}))}},{key:"editKeyUp",value:function(e){"Enter"===e.nativeEvent.key&&this.toggleEdit()}},{key:"render",value:function(){var e,t=this;return e=this.state.editTitle?a.createElement("div",{className:"note-title"},a.createElement("input",{value:this.state.note.name,onChange:function(e){return t.setName(e.target.value)},onKeyUp:function(e){return t.editKeyUp(e)},autoFocus:!0,className:"editName"}),a.createElement("span",{className:"edit"},a.createElement(N.a,{icon:C.d}))):a.createElement("div",{className:"note-title",onClick:function(){return t.toggleEdit()}},this.state.note.name,a.createElement("span",{className:"edit"},a.createElement(N.a,{icon:C.d}))),a.createElement("div",null,e,a.createElement(f.a,{value:this.state.note.markdown,onChange:function(e){return t.setValue(e)},selectedTab:this.state.tab,onTabChange:function(e){return t.setTab(e)},generateMarkdownPreview:function(e){return Promise.resolve(a.createElement(I,{value:t.state.note.markdown,onChange:function(e){return t.setValue(e)}}))},commands:this.commands,classes:{textArea:this.state.note.color,preview:this.state.note.color}}))}}]),n}(a.Component),W=(n(170),n(171),n(172),n(173),n(33)),U=n(15),A=(n(174),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).state={markdown:"",name:"",color:"white"};var o=w(a.props.id);return o&&(a.state={markdown:o.markdown,name:o.name,color:o.color}),a}return Object(u.a)(n,[{key:"delete",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.deleteClicked(this.props.id)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"preview ".concat(this.state.color)},o.a.createElement("div",{className:"title"},this.state.name,o.a.createElement("span",{className:"delete",onClick:function(t){return e.delete(t)}},o.a.createElement(N.a,{icon:C.f}))),o.a.createElement(I,{value:this.state.markdown,onChange:function(){}}))}}]),n}(o.a.Component)),D=(n(175),function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,a)).state={notes:[],choosing:!1},o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({notes:p()})}},{key:"newNote",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"empty",n=E(k(t));e.push("/note/".concat(n))}},{key:"toNote",value:function(e,t){t.push("/note/".concat(e))}},{key:"deleteNote",value:function(e){var t=function(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e){t.splice(n,1);break}return v(t),t}(e);this.setState({notes:t})}},{key:"copyNote",value:function(e){var t=function(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e){var a={id:g(t),name:t[n].name+" - Copy",markdown:t[n].markdown,color:t[n].color};t.push(a);break}return v(t),p()}(e);this.setState({notes:t})}},{key:"render",value:function(){var e=this;return a.createElement(U.a,{render:function(t){var n=t.history;return a.createElement("div",{className:"home"},a.createElement("table",{className:"home"},a.createElement("tbody",null,a.createElement("tr",{className:"actions"},a.createElement("td",{className:"actions"},a.createElement("button",{className:"pure-button mr-2",onClick:function(){return e.newNote(n)}},a.createElement(N.a,{icon:C.e})),a.createElement("button",{className:"pure-button",onClick:function(){return e.newNote(n,"checklist")}},a.createElement(N.a,{icon:C.a})))),e.state.notes.map((function(t){return a.createElement("tr",{className:"note",key:t.id},a.createElement("td",{className:"note",onClick:function(){return e.toNote(t.id,n)}},a.createElement(A,{id:t.id,deleteClicked:function(t){return e.deleteNote(t)}})))})))))}})}}]),n}(a.Component));var K=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"pure-g center"},o.a.createElement("div",{className:"pure-u-1 pure-u-md-1-5"}),o.a.createElement("div",{className:"pure-u-1 pure-u-md-3-5"},o.a.createElement(W.a,null,o.a.createElement(U.c,null,o.a.createElement(U.a,{path:"/note/:noteId",component:V}),o.a.createElement(U.a,{path:"/"},o.a.createElement(D,null)))))))},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(K,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/note-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/note-pwa","/service-worker.js");L?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(t,e)}))}}()},59:function(e,t,n){e.exports=n(177)},64:function(e,t,n){},89:function(e,t,n){}},[[59,1,2]]]);
//# sourceMappingURL=main.febd3a71.chunk.js.map